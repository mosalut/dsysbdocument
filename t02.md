# Block Synchronization

_dsysb_ starts a node. Upon startup, it first reads the _remote\_hosts_ file from the _config_ file, then appends the _-remote\_hosts_ parameter from the startup parameters to the read content. _dsysb_ then connects to these P2P nodes.

When a node is connected to by a new node, it not only introduces other nodes it knows to the new node, but also sends its highest block number to the new node. The new node then determines whether it should synchronize blocks with the new node.

For example, a new node that previously participated in the network but later shut down has a highest block size of 10000. The current node, due to network issues, only has a highest block size of 9998. Therefore, the new node's block size is higher than the current node's, and it won't request synchronization from the current node.

For example, if the highest block of a newly added node is 4000, and it was previously started but has been shut down for a few days, while the highest block of the current node is 10000, then the new node will synchronize from 4001, 4002, 4003... all the way up to 10000.

Of course, verification is performed every time a block is appended; if verification fails, the block will not be appended.

If a block receives a block production notification from another node while it is in the synchronization state, it will be ignored.

However, to prevent network issues from causing the synchronization connection to drop and the system to remain in synchronization, there is an 8-second timeout mechanism. If no new block is received after 8 seconds, the new node will check certain conditions, exit the synchronization state, and actively request block height information from the current node again. If network communication is successful, it will re-enter the synchronization state. If network communication fails again, for example, if the node is already closed, the new node has already exited the synchronization state and will naturally maintain the synchronization. Alternatively, if the conditions are not met, synchronization will end directly. Previous synchronizations remain valid.

Each time a new block is generated, it is broadcast to the entire network. Lagging nodes will catch up. If a node is lagging behind by multiple blocks, it will be synchronized in the same way as the synchronization process at startup.

Note: The _-remote\_host_ directive must not contain the address of the current node; otherwise, unpredictable errors may occur.
